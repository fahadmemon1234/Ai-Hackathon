# Data Model: Integrated RAG Chatbot

## Entities

### User Question
Represents the query submitted by the user to the chatbot.

-   **Fields**:
    -   `text`: The actual text of the user's question (string).
    -   `context_mode`: Indicates whether the question pertains to the `full_book` or `selected_text` (enum: "full_book", "selected_text").
    -   `selected_text`: Optional. The specific text snippet highlighted by the user (string).
    -   `session_id`: Optional. A unique identifier for the chat session (string/UUID).

### Book Content Chunk
A segmented piece of the book's content, optimized for embedding and retrieval.

-   **Fields**:
    -   `chunk_id`: Unique identifier for the chunk (string/UUID).
    -   `text`: The content of the chunk (string).
    -   `embedding`: The vector representation of the chunk's text (vector/array of floats).
    -   `book_id`: Identifier for the book the chunk belongs to (string).
    -   `chapter_id`: Identifier for the chapter the chunk belongs to (string).
    -   `page_number`: Optional. Page number reference for the chunk (integer).

### Chatbot Answer
The response generated by the RAG system to a user's question.

-   **Fields**:
    -   `answer_text`: The generated answer to the user's question (string).
    -   `source_references`: Optional. A list of references (e.g., `chunk_id`, `page_number`, `chapter_title`) to the source content used to generate the answer (array of strings/objects).
    -   `session_id`: Unique identifier for the chat session (string/UUID).
    -   `timestamp`: Time when the answer was generated (datetime).